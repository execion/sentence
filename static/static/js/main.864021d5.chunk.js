(this["webpackJsonpfront-end-redux"]=this["webpackJsonpfront-end-redux"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(0),a=n.n(c),o=n(8),i=n.n(o),s=n(24),u=n(34),l=n(84),j=Object(l.a)({palette:{primary:{main:"#467DEB",dark:"#20396B",light:"#8FAFEE",contrastText:"#fff"},secondary:{main:"#20396B",contrastText:"#467DEB"},tertiary:{main:"#F57767",dark:"#753931",light:"#F7BAB1",contrastText:"#fff"},text:{primary:"#fff"}},typography:{htmlFontSize:10,button:{fontSize:16,textTransform:"normal"}}}),d=n(142),p=n(138),b=n(10),f="INSERT_SENTENCES",O="NEXT_SENTENCES",x="ANSWER",h="QUESTION",m="SET_SCORE",y=n(79),g=n.n(y),v=function(e){var t=e.id,n=Object(c.useState)(!0),a=Object(b.a)(n,2),o=a[0],i=a[1],s=Object(c.useState)(new Audio("http://localhost:8000/api/audio/".concat(t))),u=Object(b.a)(s,2),l=u[0],j=u[1];Object(c.useEffect)((function(){j(new Audio("http://192.168.0.190:8000/api/audio/".concat(t))),l.load(),i(!0)}),[t]);var p=function(){var e=l.duration.toString().replace(".","");Number(e),setTimeout((function(){i(!0)}),e)};return Object(r.jsx)(d.a,{my:"1rem",children:Object(r.jsx)(g.a,{onClick:function(){o?(l.play(),i(!1),p()):(l.pause(),i(!0))},color:"primary",style:{fontSize:70}})})},S=n(136),w=n(137),E=function(e){var t=e.data,n=e.type,c=e.alternateLetter,o=a.a.useState(t.id),i=Object(b.a)(o,1)[0];return Object(r.jsx)(S.a,{item:!0,xs:"auto",children:Object(r.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){return c(i,n)},children:t.letter})})},T=function(e){var t=e.words,n=e.AlternateLetter,a=e.Types,o=e.nextSentence;return Object(c.useEffect)((function(){0===t.length&&o&&o()}),[t,o]),Object(r.jsx)(r.Fragment,{children:t.map((function(e){return Object(r.jsx)(E,{data:e,type:a,alternateLetter:n},e.id)}))})},C=function(e){var t=e.count;return Object(r.jsx)(d.a,{mx:"auto",maxWidth:"95%",width:"30rem",textAlign:"center",bgcolor:"tertiary.main",color:"text.primary",fontWeight:60,fontSize:18,my:3,borderRadius:".8rem",children:Object(r.jsxs)(S.a,{container:!0,children:[Object(r.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(r.jsxs)("p",{children:["Correct: ",t.correct]})}),Object(r.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(r.jsxs)("p",{children:["Incorrect: ",t.incorrect]})}),Object(r.jsx)(S.a,{item:!0,xs:12,md:4,children:Object(r.jsxs)("p",{children:["Count: ",t.count]})})]})})},I=n(15),N=n(23),_=n(144),k=n(52),F=function(e,t){switch(t.type){case f:return function(e,t){if(t.payload.length>0){var n=t.payload,r=n[e.index].sentence.split(" "),c=[];r=Object(k.a)(r);var a,o=Object(N.a)(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;" "!==i&&c.push({id:Object(_.a)(),letter:i})}}catch(s){o.e(s)}finally{o.f()}return Object(I.a)(Object(I.a)({},e),{},{loaded:!0,question:c,sentence:n,id:t.payload.id})}return e}(e,t);case O:return function(e){var t=e.index+1,n=e.sentence[t%e.sentence.length].sentence.split(" "),r=[];n=Object(k.a)(n);var c,a=Object(N.a)(n);try{for(a.s();!(c=a.n()).done;){var o=c.value;" "!==o&&r.push({id:Object(_.a)(),letter:o})}}catch(i){a.e(i)}finally{a.f()}return Object(I.a)(Object(I.a)({},e),{},{index:t,question:r,answer:[]})}(e);case h:return function(e,t){var n=e.question.filter((function(e){return e.id===t})),r=e.answer.concat(n),c=e.question.filter((function(e){return e.id!==t}));return Object(I.a)(Object(I.a)({},e),{},{question:c,answer:r})}(e,t.payload);case x:return function(e,t){var n=e.answer.filter((function(e){return e.id===t})),r=e.question.concat(n),c=e.answer.filter((function(e){return e.id!==t}));return Object(I.a)(Object(I.a)({},e),{},{answer:c,question:r})}(e,t.payload);case m:return function(e,t){if(!0===t)return Object(I.a)(Object(I.a)({},e),{},{countCorrect:e.countCorrect+1,count:e.count+1});return Object(I.a)(Object(I.a)({},e),{},{countIncorrect:e.countIncorrect+1,count:e.count+1})}(e,t.payload);default:return e}};var P={loaded:!1,index:0,sentence:[],question:[],answer:[],countCorrect:0,countIncorrect:0,count:0},L=n(6),q=n.n(L),A=n(18),B=function(e){return{count:e.count,correct:e.countCorrect,incorrect:e.countIncorrect}},D=function(e){return e.sentence[e.index%e.sentence.length].id},R=function(){var e=Object(A.a)(q.a.mark((function e(t,n,r){var c,a,o;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={id:n.id,answerUser:t,answerCorrect:n.sentence},e.next=3,fetch("http://192.168.0.190:8000/score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 3:return a=e.sent,e.next=6,a.json();case 6:"boolean"===typeof(o=e.sent).result&&r({type:m,payload:o.result});case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),z=Object(s.b)((function(e){var t=e.sentenceState;return{sentences:t.sentences,init:!t.loading}}),void 0)((function(e){var t=e.sentences,n=Object(c.useReducer)(F,P),a=Object(b.a)(n,2),o=a[0],i=a[1],s=function(e,t){return i({type:t,payload:e})};return Object(c.useEffect)((function(){i({type:f,payload:t})}),[t]),o.loaded?Object(r.jsxs)(d.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(r.jsx)(C,{count:B(o)}),Object(r.jsx)(v,{id:D(o)}),Object(r.jsx)(d.a,{minHeight:"3rem",my:"2rem",children:Object(r.jsx)(S.a,{container:!0,spacing:2,justify:"center",children:Object(r.jsx)(T,{words:o.answer,AlternateLetter:s,Types:x})})}),Object(r.jsx)(S.a,{container:!0,justify:"center",spacing:2,children:Object(r.jsx)(T,{nextSentence:function(){0===o.question.length&&o.sentence.length>0&&(R(o.answer,o.sentence[o.index%o.sentence.length],i),i({type:O}))},words:o.question,AlternateLetter:s,Types:h})})]}):Object(r.jsx)(d.a,{display:"flex",justifyContent:"center",mt:25,children:Object(r.jsx)(p.a,{size:100})})})),J=n(145),M=n(143),U=n(139),X=n(60),W=n.n(X),G=Object(J.a)()((function(e){var t=e.username,n=e.width,a=Object(c.useState)(null),o=Object(b.a)(a,2),i=o[0],s=o[1],u=Boolean(i),l=function(){localStorage.removeItem("username"),localStorage.removeItem("passport"),window.location.reload()};return Object(J.b)("xs",n)?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w.a,{variant:"text",color:"primary",onClick:function(e){s(e.currentTarget)},children:Object(r.jsx)(W.a,{})}),Object(r.jsx)(M.a,{id:"fade-menu",anchorEl:i,keepMounted:!0,open:u,onClose:function(){s(null)},TransitionComponent:U.a,children:Object(r.jsxs)(d.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"6rem",children:[Object(r.jsx)(w.a,{variant:"text",color:"primary",children:"".concat(t)}),Object(r.jsx)(w.a,{variant:"text",color:"secondary",onClick:function(){return l()},children:"Logout"})]})})]}):Object(r.jsxs)(d.a,{width:200,display:"flex",justifyContent:"space-between",children:[Object(r.jsx)(w.a,{variant:"contained",color:"primary",children:"".concat(t)}),Object(r.jsx)(w.a,{variant:"contained",color:"secondary",onClick:function(){return l()},children:"Logout"})]})})),V=n(146),H=Object(J.a)()((function(e){var t=Object(c.useState)(null),n=Object(b.a)(t,2),a=n[0],o=n[1],i=Boolean(a);return Object(J.b)("xs",e.width)?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w.a,{variant:"text",color:"primary",onClick:function(e){o(e.currentTarget)},children:Object(r.jsx)(W.a,{})}),Object(r.jsx)(M.a,{id:"fade-menu",anchorEl:a,keepMounted:!0,open:i,onClose:function(){o(null)},TransitionComponent:U.a,children:Object(r.jsxs)(d.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(r.jsx)(V.a,{children:Object(r.jsx)(w.a,{variant:"text",color:"primary",component:u.b,to:"/",children:"Login"})}),Object(r.jsx)(V.a,{children:Object(r.jsx)(w.a,{variant:"text",color:"primary",component:u.b,to:"/signup",children:"Sign-up"})})]})})]}):Object(r.jsxs)(d.a,{width:200,display:"flex",justifyContent:"space-between",children:[Object(r.jsx)(w.a,{variant:"contained",color:"primary",component:u.b,to:"/",children:"Login"}),Object(r.jsx)(w.a,{variant:"contained",color:"secondary",component:u.b,to:"/signup",children:"Sign-up"})]})})),Q=Object(s.b)((function(e){var t=e.loginState;return{logined:t.loading,username:t.username}}),void 0)((function(e){var t=e.logined,n=e.username;return Object(r.jsx)(d.a,{bgcolor:"primary.dark",height:"8rem",children:Object(r.jsxs)(S.a,{container:!0,direction:"row",justify:"center",children:[Object(r.jsx)(S.a,{item:!0,xs:7,md:9,lg:10,children:Object(r.jsx)(d.a,{display:"flex",alignItems:"center",height:"8rem",ml:10,fontSize:40,fontWeight:"bold",color:"text.primary",children:Object(r.jsx)("p",{children:"ENGSyS"})})}),Object(r.jsx)(S.a,{item:!0,xs:5,md:3,lg:2,children:Object(r.jsx)(d.a,{display:"flex",alignItems:"center",height:"8rem",justifyContent:"center",children:t?Object(r.jsx)(G,{username:n}):Object(r.jsx)(H,{})})})]})})})),K="SET_SENTENCES",Y="GET_SENTENCES",Z=Object(s.b)((function(e){return{init:e.sentenceState.loading}}),{getSentences:function(){return function(){var e=Object(A.a)(q.a.mark((function e(t){var n,r,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:K}),n={passport:localStorage.getItem("passport")},e.next=4,fetch("http://192.168.0.190:8000/api/sentences",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return r=e.sent,e.next=7,r.json();case 7:"object"===typeof(c=e.sent)&&t({type:Y,payload:Object(k.a)(c)});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.init,n=e.getSentences;return Object(c.useEffect)((function(){n()}),[n]),t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(d.a,{display:"flex",justifyContent:"center",mt:25,children:Object(r.jsx)(p.a,{size:100})})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(z,{})]})})),$=n(14),ee=n(36),te="SET_PASSPORT",ne=n(61),re=n(37);function ce(){var e=Object(ee.a)(["\n    ::placeholder {\n        color: rgba(10,10,10,.9);\n        text-indent: .2rem;\n    }\n"]);return ce=function(){return e},e}function ae(){var e=Object(ee.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n    height: 6rem;\n    line-height: 0;\n"]);return ae=function(){return e},e}function oe(){var e=Object(ee.a)(["\n    display: flex;\n    justify-content: center;\n    margin-top: 4rem;\n"]);return oe=function(){return e},e}var ie=re.a.div(oe()),se=re.a.form(ae()),ue=re.a.input(ce()),le=Object(s.b)(void 0,{getPassport:function(e,t){return function(){var n=Object(A.a)(q.a.mark((function n(r){var c,a,o;return q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={username:e,password:t},n.next=3,fetch("http://192.168.0.190:8000/login/access",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});case 3:return a=n.sent,n.next=6,a.json();case 6:o=n.sent,r({type:te,payload:{passport:o,username:e}});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.getPassport,n=Object(ne.a)(),c=n.register,a=n.handleSubmit;return Object(r.jsx)(ie,{children:Object(r.jsxs)(se,{onSubmit:a((function(e){t(e.username,e.password)})),children:[Object(r.jsx)(ue,{type:"text",placeholder:"User",name:"username",ref:c}),Object(r.jsx)(ue,{type:"password",placeholder:"Password",name:"password",ref:c}),Object(r.jsx)(w.a,{variant:"contained",type:"submit",color:"primary",children:"Login"})]})})})),je=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(le,{})]})};function de(){var e=Object(ee.a)(["\n    height: 1.5rem;\n    width: 16rem;\n    border: 1px solid rgb(63, 62, 62);\n\n    ::placeholder {\n        text-indent: .5rem;\n    }\n"]);return de=function(){return e},e}function pe(){var e=Object(ee.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n    height: 12rem;\n"]);return pe=function(){return e},e}function be(){var e=Object(ee.a)(["\n    display: flex;\n    justify-content: center;\n    margin-top: 3rem;\n"]);return be=function(){return e},e}var fe=re.a.div(be()),Oe=re.a.form(pe()),xe=re.a.input(de()),he=function(){var e=Object(ne.a)(),t=e.register,n=e.handleSubmit,c=function(){var e=Object(A.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://192.168.0.190:8000/login/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(fe,{children:Object(r.jsxs)(Oe,{onSubmit:n(c),children:[Object(r.jsx)(xe,{type:"text",name:"username",placeholder:"username",ref:t}),Object(r.jsx)(xe,{type:"password",name:"password",placeholder:"password",ref:t}),Object(r.jsx)(xe,{type:"password",name:"repeatpassword",placeholder:"repeat password",ref:t}),Object(r.jsx)(xe,{type:"text",name:"email",placeholder:"e-mail",ref:t}),Object(r.jsx)(w.a,{variant:"contained",color:"primary",type:"submit",children:"Send"})]})})})},me=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Q,{}),Object(r.jsx)(he,{})]})},ye=Object(s.b)((function(e){return{havePassport:e.loginState.loading}}))((function(e){return e.havePassport?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)($.c,{children:Object(r.jsx)($.a,{exact:!0,path:"/",component:Z})})}):Object(r.jsxs)($.c,{children:[Object(r.jsx)($.a,{exact:!0,path:"/",component:je}),Object(r.jsx)($.a,{exact:!0,path:"/signup",component:me})]})})),ge={loading:!1,sentences:[]},ve=n(48),Se=n(83),we={username:"username"in localStorage?localStorage.getItem("username"):"",passport:"passport"in localStorage?localStorage.getItem("passport"):"",loading:"passport"in localStorage},Ee=function(e,t){return console.log(t.payload),!1===t.payload?e:t.payload.passport.length>4?(localStorage.setItem("passport",t.payload.passport),localStorage.setItem("username",t.payload.username),Object(I.a)(Object(I.a)({},e),{},{loading:!0,passport:t.payload.passport,username:t.payload.username})):e},Te="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ve.d,Ce=Object(ve.c)({sentenceState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(I.a)(Object(I.a)({},e),{},{loading:!0});case Y:return Object(I.a)(Object(I.a)({},e),{},{loading:!1,sentences:t.payload});default:return e}},loginState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Ee(e,t);default:return e}}}),Ie=Object(ve.e)(Ce,Te(Object(ve.a)(Se.a))),Ne=n(140);i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Ne.a,{theme:j,children:Object(r.jsx)(u.a,{children:Object(r.jsx)(s.a,{store:Ie,children:Object(r.jsx)(ye,{})})})})}),document.getElementById("root"))}},[[109,1,2]]]);
//# sourceMappingURL=main.864021d5.chunk.js.map