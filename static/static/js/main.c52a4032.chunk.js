(this["webpackJsonpfront-end-redux"]=this["webpackJsonpfront-end-redux"]||[]).push([[0],{92:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),o=n(27),i=n.n(o),s=n(18),u=n(33),l=n(65),d=Object(l.a)({palette:{primary:{main:"#467DEB",dark:"#20396B",light:"#8FAFEE",contrastText:"#fff"},secondary:{main:"#20396B",contrastText:"#467DEB"},tertiary:{main:"#F57767",dark:"#753931",light:"#F7BAB1",contrastText:"#fff"},text:{primary:"#fff"}},typography:{htmlFontSize:10,button:{fontSize:16,textTransform:"normal"}}}),j=n(111),p=n(108),b=n(14),f="INSERT_SENTENCES",O="ANSWER",h="QUESTION",x=n(60),m=n.n(x),y=function(e){var t=e.id,n=Object(a.useState)(!0),c=Object(b.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)(new Audio("http://localhost:8000/api/audio/".concat(t))),u=Object(b.a)(s,2),l=u[0],d=u[1];Object(a.useEffect)((function(){d(new Audio("http://192.168.0.190:8000/api/audio/".concat(t))),l.load(),i(!0)}),[t]);var j=function(){var e=l.duration.toString().replace(".","");Number(e),setTimeout((function(){i(!0)}),e)};return Object(r.jsx)(m.a,{onClick:function(){o?(l.play(),i(!1),j()):(l.pause(),i(!0))},color:"primary",style:{fontSize:70}})},g=n(107),v=n(112),S=function(e){var t=e.data,n=e.type,a=e.alternateLetter,o=c.a.useState(t.id),i=Object(b.a)(o,1)[0];return Object(r.jsx)(g.a,{item:!0,xs:"auto",children:Object(r.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){return a(i,n)},children:t.letter})})},w=function(e){var t=e.words,n=e.AlternateLetter,a=e.Types;return Object(r.jsx)(r.Fragment,{children:t.map((function(e){return Object(r.jsx)(S,{data:e,type:a,alternateLetter:n},e.id)}))})},T=function(e){var t=e.count;return Object(r.jsx)(j.a,{mx:"auto",maxWidth:"95%",width:"30rem",textAlign:"center",bgcolor:"tertiary.main",color:"text.primary",fontWeight:60,fontSize:18,my:3,borderRadius:".8rem",children:Object(r.jsxs)(g.a,{container:!0,children:[Object(r.jsx)(g.a,{item:!0,xs:12,md:4,children:Object(r.jsxs)("p",{children:["Correct: ",t.correct]})}),Object(r.jsx)(g.a,{item:!0,xs:12,md:4,children:Object(r.jsxs)("p",{children:["Incorrect: ",t.incorrect]})}),Object(r.jsx)(g.a,{item:!0,xs:12,md:4,children:Object(r.jsxs)("p",{children:["Count: ",t.count]})})]})})},E=n(10),C=n(22),I=n(113),N=n(39),k=n(4),F=n.n(k),P=n(13),q=function(e){return{count:e.count,correct:e.countCorrect,incorrect:e.countIncorrect}},A=function(e,t){return e[t.index%e.length].id},L=function(){var e=Object(P.a)(F.a.mark((function e(t,n){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:t,score:n},e.next=3,fetch("http://192.168.0.190:8000/score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(e,t){switch(t.type){case f:return function(e,t){var n=t.payload.sentence.split(" "),r=[];n=Object(N.a)(n);var a,c=Object(C.a)(n);try{for(c.s();!(a=c.n()).done;){var o=a.value;r.push({id:Object(I.a)(),letter:o})}}catch(i){c.e(i)}finally{c.f()}return r=Object(N.a)(r),Object(E.a)(Object(E.a)({},e),{},{loaded:!0,question:r,answerCorrect:t.payload.sentence,id:t.payload.id})}(e,t);case h:return function(e,t){var n=e.question.filter((function(e){return e.id===t})),r=e.answer.concat(n),a=e.question.filter((function(e){return e.id!==t}));if(0===a.length)return(n=r.map((function(e){return e.letter})).join(" "))===e.answerCorrect?(L(e.id,!0),Object(E.a)(Object(E.a)({},e),{},{question:[],answer:[],countCorrect:e.countCorrect+1,index:e.index+1,count:e.count+1})):(L(e.id,!1),Object(E.a)(Object(E.a)({},e),{},{question:[],answer:[],countIncorrect:e.countIncorrect+1,index:e.index+1,count:e.count+1}));return Object(E.a)(Object(E.a)({},e),{},{question:a,answer:r})}(e,t.payload);case O:return function(e,t){var n=e.answer.filter((function(e){return e.id===t})),r=e.question.concat(n),a=e.answer.filter((function(e){return e.id!==t}));return Object(E.a)(Object(E.a)({},e),{},{answer:a,question:r})}(e,t.payload);default:return e}};var B={loaded:!1,index:0,id:0,question:[],answer:[],answerCorrect:"",countCorrect:0,countIncorrect:0,count:0},J=Object(s.b)((function(e){var t=e.sentenceState;return{sentences:t.sentences,init:!t.loading}}),void 0)((function(e){var t=e.sentences,n=Object(a.useReducer)(z,B),c=Object(b.a)(n,2),o=c[0],i=c[1],s=function(e,t){return i({type:t,payload:e})};return Object(a.useEffect)((function(){!function(e,t,n){if(e.length>0){var r={id:e[t.index%e.length].id,sentence:e[t.index%e.length].sentence};n({type:f,payload:r})}}(t,o,i)}),[o.index]),o.loaded?Object(r.jsxs)(j.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(r.jsx)(T,{count:q(o)}),Object(r.jsx)(j.a,{mb:"1rem",mt:"1rem",children:Object(r.jsx)(y,{id:A(t,o)})}),Object(r.jsx)(j.a,{minHeight:216,children:Object(r.jsx)(g.a,{container:!0,spacing:1,children:Object(r.jsx)(w,{words:o.answer,AlternateLetter:s,Types:O})})}),Object(r.jsx)(g.a,{container:!0,justify:"center",spacing:4,children:Object(r.jsx)(w,{words:o.question,AlternateLetter:s,Types:h})})]}):Object(r.jsx)(j.a,{display:"flex",justifyContent:"center",mt:25,children:Object(r.jsx)(p.a,{size:100})})})),R=function(e){var t=e.username;return Object(r.jsxs)(j.a,{width:200,display:"flex",justifyContent:"space-between",children:[Object(r.jsx)(v.a,{variant:"contained",color:"primary",children:"".concat(t)}),Object(r.jsx)(v.a,{variant:"contained",color:"secondary",onClick:function(){return localStorage.removeItem("username"),localStorage.removeItem("passport"),void window.location.reload()},children:"Logout"})]})},W=function(){return Object(r.jsxs)(j.a,{width:200,display:"flex",justifyContent:"space-between",children:[Object(r.jsx)(v.a,{variant:"contained",color:"primary",component:u.b,to:"/",children:"Login"}),Object(r.jsx)(v.a,{variant:"contained",color:"secondary",component:u.b,to:"/signup",children:"Sign-up"})]})},_=Object(s.b)((function(e){var t=e.loginState;return{logined:t.loading,username:t.username}}),void 0)((function(e){var t=e.logined,n=e.username;return Object(r.jsx)(j.a,{bgcolor:"primary.dark",height:"8rem",children:Object(r.jsxs)(g.a,{container:!0,direction:"row",justify:"center",children:[Object(r.jsx)(g.a,{item:!0,xs:7,md:9,lg:10,children:Object(r.jsx)(j.a,{display:"flex",alignItems:"center",height:"8rem",ml:10,fontSize:50,fontWeight:"bold",color:"text.primary",children:Object(r.jsx)("p",{children:"ENGSyS"})})}),Object(r.jsx)(g.a,{item:!0,xs:5,md:3,lg:2,children:Object(r.jsx)(j.a,{display:"flex",alignItems:"center",height:"8rem",children:t?Object(r.jsx)(R,{username:n}):Object(r.jsx)(W,{})})})]})})})),D="SET_SENTENCES",G="GET_SENTENCES",U=Object(s.b)((function(e){return{init:e.sentenceState.loading}}),{getSentences:function(){return function(){var e=Object(P.a)(F.a.mark((function e(t){var n,r,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:D}),n={passport:localStorage.getItem("passport")},e.next=4,fetch("http://192.168.0.190:8000/api/sentences",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return r=e.sent,e.next=7,r.json();case 7:"object"===typeof(a=e.sent)&&t({type:G,payload:Object(N.a)(a)});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.init,n=e.getSentences;return Object(a.useEffect)((function(){n()}),[n]),t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(_,{}),Object(r.jsx)(j.a,{display:"flex",justifyContent:"center",mt:25,children:Object(r.jsx)(p.a,{size:100})})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(_,{}),Object(r.jsx)(J,{})]})})),H=n(7),M=n(29),Q="SET_PASSPORT",K=n(45),V=n(30);function X(){var e=Object(M.a)(["\n    ::placeholder {\n        color: rgba(10,10,10,.9);\n        text-indent: .2rem;\n    }\n"]);return X=function(){return e},e}function Y(){var e=Object(M.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n    height: 6rem;\n    line-height: 0;\n"]);return Y=function(){return e},e}function Z(){var e=Object(M.a)(["\n    display: flex;\n    justify-content: center;\n    margin-top: 4rem;\n"]);return Z=function(){return e},e}var $=V.a.div(Z()),ee=V.a.form(Y()),te=V.a.input(X()),ne=Object(s.b)(void 0,{getPassport:function(e,t){return function(){var n=Object(P.a)(F.a.mark((function n(r){var a,c,o;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={username:e,password:t},n.next=3,fetch("http://192.168.0.190:8000/login/access",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 3:return c=n.sent,n.next=6,c.json();case 6:o=n.sent,r({type:Q,payload:{passport:o,username:e}});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.getPassport,n=Object(K.a)(),a=n.register,c=n.handleSubmit;return Object(r.jsx)($,{children:Object(r.jsxs)(ee,{onSubmit:c((function(e){t(e.username,e.password)})),children:[Object(r.jsx)(te,{type:"text",placeholder:"User",name:"username",ref:a}),Object(r.jsx)(te,{type:"password",placeholder:"Password",name:"password",ref:a}),Object(r.jsx)(v.a,{variant:"contained",type:"submit",color:"primary",children:"Login"})]})})})),re=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(_,{}),Object(r.jsx)(ne,{})]})};function ae(){var e=Object(M.a)(["\n    height: 1.5rem;\n    width: 16rem;\n    border: 1px solid rgb(63, 62, 62);\n\n    ::placeholder {\n        text-indent: .5rem;\n    }\n"]);return ae=function(){return e},e}function ce(){var e=Object(M.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n    height: 12rem;\n"]);return ce=function(){return e},e}function oe(){var e=Object(M.a)(["\n    display: flex;\n    justify-content: center;\n    margin-top: 3rem;\n"]);return oe=function(){return e},e}var ie=V.a.div(oe()),se=V.a.form(ce()),ue=V.a.input(ae()),le=function(){var e=Object(K.a)(),t=e.register,n=e.handleSubmit,a=function(){var e=Object(P.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://192.168.0.190:8000/login/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(ie,{children:Object(r.jsxs)(se,{onSubmit:n(a),children:[Object(r.jsx)(ue,{type:"text",name:"username",placeholder:"username",ref:t}),Object(r.jsx)(ue,{type:"password",name:"password",placeholder:"password",ref:t}),Object(r.jsx)(ue,{type:"password",name:"repeatpassword",placeholder:"repeat password",ref:t}),Object(r.jsx)(ue,{type:"text",name:"email",placeholder:"e-mail",ref:t}),Object(r.jsx)(v.a,{variant:"contained",color:"primary",type:"submit",children:"Send"})]})})})},de=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(_,{}),Object(r.jsx)(le,{})]})},je=Object(s.b)((function(e){return{havePassport:e.loginState.loading}}))((function(e){return e.havePassport?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(H.c,{children:Object(r.jsx)(H.a,{exact:!0,path:"/",component:U})})}):Object(r.jsxs)(H.c,{children:[Object(r.jsx)(H.a,{exact:!0,path:"/",component:re}),Object(r.jsx)(H.a,{exact:!0,path:"/signup",component:de})]})})),pe={loading:!1,sentences:[]},be=n(34),fe=n(64),Oe={username:"username"in localStorage?localStorage.getItem("username"):"",passport:"passport"in localStorage?localStorage.getItem("passport"):"",loading:"passport"in localStorage},he=function(e,t){return console.log(t.payload),!1===t.payload?e:t.payload.passport.length>4?(localStorage.setItem("passport",t.payload.passport),localStorage.setItem("username",t.payload.username),Object(E.a)(Object(E.a)({},e),{},{loading:!0,passport:t.payload.passport,username:t.payload.username})):e},xe=Object(be.c)({sentenceState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(E.a)(Object(E.a)({},e),{},{loading:!0});case G:return Object(E.a)(Object(E.a)({},e),{},{loading:!1,sentences:t.payload});default:return e}},loginState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return he(e,t);default:return e}}}),me=Object(be.d)(xe,Object(be.a)(fe.a)),ye=n(109);i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(ye.a,{theme:d,children:Object(r.jsx)(u.a,{children:Object(r.jsx)(s.a,{store:me,children:Object(r.jsx)(je,{})})})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.c52a4032.chunk.js.map